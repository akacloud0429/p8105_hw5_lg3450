---
title: "p8105_hw5_lg3450"
output: github_document
---
first load all necessary libraries
```{r message=FALSE}
library(tidyverse)
```

# Problem 1
**Suppose you put n people in a room, and want to know the probability that at least two people share a birthday. For simplicity, we’ll assume there are no leap years (i.e. there are only 365 days) and that birthdays are uniformly distributed over the year (which is actually not the case).**

* Q1: Write a function that, for a fixed group size, randomly draws “birthdays” for each person; checks whether there are duplicate birthdays in the group; and returns TRUE or FALSE based on the result.
```{r}
check_birthday = function(n) {
  #randomly draw #n birthdays from 1 to 365, allow for same bthd
  birthdays = sample(1:365, size = n, replace = TRUE)
  #logic: if length < n, duplication appears
  has_duplicate = length(unique(birthdays)) < n
  has_duplicate
}
```
* Q2: Next, run this function 10000 times for each group size between 2 and 50. For each group size, compute the probability that at least two people in the group will share a birthday by averaging across the 10000 simulation runs. 
```{r}
set.seed(1)

sim_grid = expand_grid(
  group_size = 2:50,
  iter = 1:10000)

sim_results = sim_grid |>
  mutate(
    has_duplicate = map_dbl(group_size, check_birthday))

prob_results = sim_results |>
  group_by(group_size) |>
  summarize(
    prob_shared = mean(has_duplicate))
prob_results
```

* Q3: Make a plot showing the probability as a function of group size, and comment on your results.
```{r}
prob_results |>
  ggplot(aes(x = group_size, y = prob_shared)) +
  geom_point() +
  geom_path() +
  labs(
    title = "Estimated Probability of a Shared Birthday",
    x = "Group Size",
    y = "Probability of at least one shared birthday"
  ) +
  scale_y_continuous(labels = scales::percent)
```

The plot illustrates a clear non-linear acceleration in probability, rather than a steady, linear increase. This simulation confirms the "birthday paradox," showing the 50% probability threshold is crossed with a group size of just 23. Following this point, the probability rapidly converges toward certainty, reaching 97% by a group size of 50.


# Problem2

When designing an experiment or analysis, a common question is whether it is likely that a true effect will be detected – put differently, whether a false null hypothesis will be rejected. The probability that a false null hypothesis is rejected is referred to as power, and it depends on several factors, including: the sample size; the effect size; and the error variance. In this problem, you will conduct a simulation to explore power in a one-sample t-test.




